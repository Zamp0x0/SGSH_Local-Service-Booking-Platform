# 🌟 拾光生活 · AI 智能本地生活 & 高并发优惠券系统  

拾光生活是一个集 **本地商户信息查询、优惠券秒杀、订单系统与 AI 智能客服** 于一体的综合性平台。  
系统基于高并发 Redis 架构，并结合大模型与向量知识库，实现“能聊天、能下单、能预约”的智能服务体验。

---

## 🧠 项目简介

拾光生活为用户提供：

- 商家信息查询  
- 优惠券秒杀  
- 订单与支付  
- AI 智能客服与预约  

同时帮助商家推广优惠信息，模拟真实互联网本地生活平台的核心业务场景。

---

## 🧱 技术栈

| 分类 | 技术 |
|------|------|
| 后端 | Spring Boot |
| ORM | MyBatis Plus |
| 数据库 | MySQL |
| 缓存 | Redis + Caffeine |
| 消息队列 | Kafka |
| 并发控制 | Redis + Lua |
| AI | LangChain4j + 阿里云百炼 |

---

## 🔥 核心功能

### 1. 秒杀系统（防超卖 + 一人一单）

- 使用 Redis 存储库存与订单信息  
- 使用 Lua 脚本原子判断下单资格  
- 保证库存不超卖、用户一人一单  

---

### 2. 秒杀流程异步化

- 用户下单后  
- Kafka 异步处理库存扣减与订单创建  
- 显著提升秒杀场景并发性能  

---

### 3. 未支付订单自动关闭

- 使用 Spring Task 定时任务  
- 自动关闭超时未支付订单  
- 释放库存，防止资源占用  

---

### 4. 支付与关单并发控制

- 使用乐观锁  
- 解决订单支付与关单的并发冲突问题  
- 保证订单状态一致性  

---

### 5. Redis 缓存优化

- 使用逻辑过期解决热点 Key 缓存击穿  
- 使用缓存空值解决缓存穿透问题  

---

### 6. 数据一致性保障

- 更新数据库后删除缓存  
- 删除失败通过消息队列补偿  
- Redis TTL 兜底保证最终一致性  

---

### 7. 多级缓存架构

请求 → Caffeine → Redis → MySQL

- 提升热点数据访问速度  
- 显著降低 Redis 压力  

---

### 8. 滑动窗口限流

- 基于 Redis + AOP + 注解  
- 支持全局、IP、用户多维度限流  
- 防止系统被刷券、爬虫攻击  

---

### 9. AI 智能客服

- 接入阿里云百炼大模型  
- 使用 Redis 维护对话记忆  
- 基于 Function Calling 调用后端接口  
- 支持：
  - 查询商户  
  - 查询优惠  
  - 预约店铺  

---

## 📦 项目结构

```text
shiguang-life
├── core           本地生活、秒杀、订单系统
└── consultant     AI 智能客服与向量知识库



